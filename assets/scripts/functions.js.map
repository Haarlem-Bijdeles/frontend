{"version":3,"sources":["webpack:///webpack/bootstrap 498f3716ead1b6e23fab?d1c7","webpack:///./src/scripts/functions.js","webpack:///./src/scripts/menu.js","webpack:///./src/scripts/object-fit-polyfill.js","webpack:///./~/object-fit/dist/polyfill.object-fit.js","webpack:///(webpack)/buildin/module.js"],"names":["toggleMenu","button","document","querySelector","menu","body","expanded","getAttribute","setAttribute","String","classList","toggle","addEventListener","polyfill","selector","fittype"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACtCA;;AACA,wB;;;;;;;;ACDA,KAAMA,aAAa,SAAbA,UAAa,GAAM;AACvB,OAAMC,SAASC,SAASC,aAAT,CAAuB,gBAAvB,CAAf;AACA,OAAMC,OAAOF,SAASC,aAAT,CAAuB,aAAvB,CAAb;AACA,OAAME,OAAOH,SAASC,aAAT,CAAuB,MAAvB,CAAb;;AAEA,OAAMG,WAAWL,OAAOM,YAAP,CAAoB,eAApB,MAAyC,MAA1D;AACAN,UAAOO,YAAP,CAAoB,eAApB,EAAqCC,OAAO,CAACH,QAAR,CAArC;AACAF,QAAKM,SAAL,CAAeC,MAAf,CAAsB,WAAtB,EAAmC,CAACL,QAApC;AACAD,QAAKK,SAAL,CAAeC,MAAf,CAAsB,WAAtB,EAAmC,CAACL,QAApC;AACD,EATD;;AAYA,EAAC,YAAM;AACL,OAAML,SAASC,SAASC,aAAT,CAAuB,gBAAvB,CAAf;AACAF,UAAOW,gBAAP,CAAwB,OAAxB,EAAiCZ,UAAjC;AACD,EAHD,I;;;;;;;;ACZA;;;;;;AAEA,qBAAUa,QAAV,CAAmB;AACjBC,aAAU,cADO,EACS;AAC1BC,YAAS,OAFQ,CAEC;AAFD,EAAnB,E;;;;;;iECFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAQ,gBAAgB;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS,SAAS;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,oEAAmE,4BAA4B;AAC/F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+CAA8C;AAC9C,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,UAAS,gBAAgB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kDAAiD,iBAAiB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;;AAEJ;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,SAAQ,gBAAgB;AACxB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA,OAAM;AACN;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAE;AACF,qFAA0B,kBAAkB,EAAE;;AAE9C;AACA,GAAE;AACF;AACA;;AAEA,EAAC;;;;;;;;ACtsBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"functions.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 498f3716ead1b6e23fab","import './menu';\nimport './object-fit-polyfill';\n// import './service-worker';\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/functions.js","const toggleMenu = () => {\n  const button = document.querySelector('.menu__trigger');\n  const menu = document.querySelector('.menu__list');\n  const body = document.querySelector('body');\n\n  const expanded = button.getAttribute('aria-expanded') === 'true';\n  button.setAttribute('aria-expanded', String(!expanded));\n  menu.classList.toggle('is-active', !expanded);\n  body.classList.toggle('is-active', !expanded);\n};\n\n\n(() => {\n  const button = document.querySelector('.menu__trigger');\n  button.addEventListener('click', toggleMenu);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/menu.js","import objectFit from 'object-fit';\n\nobjectFit.polyfill({\n  selector: '.hero__image', // this can be any CSS selector\n  fittype: 'cover', // either contain, cover, fill or none\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/object-fit-polyfill.js","(function (ELEMENT) {\n\tELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector || function matches(selector) {\n\t\tvar\n\t\telement = this,\n\t\telements = (element.document || element.ownerDocument).querySelectorAll(selector),\n\t\tindex = 0;\n\n\t\twhile (elements[index] && elements[index] !== element) {\n\t\t\t++index;\n\t\t}\n\n\t\treturn elements[index] ? true : false;\n\t};\n\n\tELEMENT.closest = ELEMENT.closest || function closest(selector) {\n\t\tvar element = this;\n\n\t\twhile (element) {\n\t\t\tif (element.matches(selector)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\telement = element.parentElement;\n\t\t}\n\n\t\treturn element;\n\t};\n}(Element.prototype));\n\n/*!\n * A polyfill for Webkit's window.getMatchedCSSRules, based on\n * https://gist.github.com/ydaniv/3033012\n *\n * @author: Yehonatan Daniv\n * @author: ssafejava\n * @author: Christian \"Schepp\" Schaefer <schaepp@gmx.de>\n *\n */\n\n'use strict';\n\n(function () {\n\t// polyfill window.getMatchedCSSRules() in FireFox 6+\n\tif (typeof window.getMatchedCSSRules === 'function') {\n\t\treturn;\n\t}\n\n\tvar ELEMENT_RE = /[\\w-]+/g,\n\t\tID_RE = /#[\\w-]+/g,\n\t\tCLASS_RE = /\\.[\\w-]+/g,\n\t\tATTR_RE = /\\[[^\\]]+\\]/g,\n\t\t// :not() pseudo-class does not add to specificity, but its content does as if it was outside it\n\t\tPSEUDO_CLASSES_RE = /\\:(?!not)[\\w-]+(\\(.*\\))?/g,\n\t\tPSEUDO_ELEMENTS_RE = /\\:\\:?(after|before|first-letter|first-line|selection)/g;\n\n\t// convert an array-like object to array\n\tvar toArray = function (list) {\n\t\tvar items = [];\n\t\tvar i = 0;\n\t\tvar listLength = list.length;\n\n\t\tfor (; i < listLength; i++) {\n\t\t\titems.push(list[i]);\n\t\t}\n\n\t\treturn items;\n\t};\n\n\t// get host of stylesheet\n\tvar getCSSHost = function (href) {\n\t\tvar fakeLinkOfSheet = document.createElement('a');\n\n\t\tfakeLinkOfSheet.href = href;\n\n\t\treturn fakeLinkOfSheet.host;\n\t};\n\n\t// handles extraction of `cssRules` as an `Array` from a stylesheet or something that behaves the same\n\tvar getSheetRules = function (stylesheet) {\n\t\tvar sheetMedia = stylesheet.media && stylesheet.media.mediaText;\n\t\tvar sheetHost;\n\n\t\t// if this sheet is cross-origin and option is set skip it\n\t\tif (objectFit.disableCrossDomain == 'true') {\n\t\t\tsheetHost = getCSSHost(stylesheet.href);\n\n\t\t\tif ((sheetHost !== window.location.host)) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\n\t\t// if this sheet is disabled skip it\n\t\tif (stylesheet.disabled) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!window.matchMedia) {\n\t\t\tif (sheetMedia && sheetMedia.length) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t\t// if this sheet's media is specified and doesn't match the viewport then skip it\n\t\telse if (sheetMedia && sheetMedia.length && ! window.matchMedia(sheetMedia).matches) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// get the style rules of this sheet\n\t\treturn toArray(stylesheet.cssRules);\n\t};\n\n\tvar _find = function (string, re) {\n\t\tvar matches = string.match(re);\n\n\t\treturn re ? re.length : 0;\n\t};\n\n\t// calculates the specificity of a given `selector`\n\tvar calculateScore = function (selector) {\n\t\tvar score = [0, 0, 0];\n\t\tvar parts = selector.split(' ');\n\t\tvar part;\n\t\tvar match;\n\n\t\t//TODO: clean the ':not' part since the last ELEMENT_RE will pick it up\n\t\twhile (part = parts.shift(), typeof part === 'string') {\n\t\t\t// find all pseudo-elements\n\t\t\tmatch = _find(part, PSEUDO_ELEMENTS_RE);\n\t\t\tscore[2] = match;\n\t\t\t// and remove them\n\t\t\tmatch && (part = part.replace(PSEUDO_ELEMENTS_RE, ''));\n\t\t\t// find all pseudo-classes\n\t\t\tmatch = _find(part, PSEUDO_CLASSES_RE);\n\t\t\tscore[1] = match;\n\t\t\t// and remove them\n\t\t\tmatch && (part = part.replace(PSEUDO_CLASSES_RE, ''));\n\t\t\t// find all attributes\n\t\t\tmatch = _find(part, ATTR_RE);\n\t\t\tscore[1] += match;\n\t\t\t// and remove them\n\t\t\tmatch && (part = part.replace(ATTR_RE, ''));\n\t\t\t// find all IDs\n\t\t\tmatch = _find(part, ID_RE);\n\t\t\tscore[0] = match;\n\t\t\t// and remove them\n\t\t\tmatch && (part = part.replace(ID_RE, ''));\n\t\t\t// find all classes\n\t\t\tmatch = _find(part, CLASS_RE);\n\t\t\tscore[1] += match;\n\t\t\t// and remove them\n\t\t\tmatch && (part = part.replace(CLASS_RE, ''));\n\t\t\t// find all elements\n\t\t\tscore[2] += _find(part, ELEMENT_RE);\n\t\t}\n\n\t\treturn parseInt(score.join(''), 10);\n\t};\n\n\t// returns the heights possible specificity score an element can get from a give rule's selectorText\n\tvar getSpecificityScore = function (element, selectorText) {\n\t\tvar selectors = selectorText.split(','),\n\t\t\tselector, score, result = 0;\n\n\t\twhile (selector = selectors.shift()) {\n\t\t\tif (element.closest(selector)) {\n\t\t\t\tscore = calculateScore(selector);\n\t\t\t\tresult = score > result ? score : result;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tvar sortBySpecificity = function (element, rules) {\n\t\t// comparing function that sorts CSSStyleRules according to specificity of their `selectorText`\n\t\tvar compareSpecificity = function (a, b) {\n\t\t\treturn getSpecificityScore(element, b.selectorText) - getSpecificityScore(element, a.selectorText);\n\t\t};\n\n\t\treturn rules.sort(compareSpecificity);\n\t};\n\n\t//TODO: not supporting 2nd argument for selecting pseudo elements\n\t//TODO: not supporting 3rd argument for checking author style sheets only\n\twindow.getMatchedCSSRules = function (element) {  /*, pseudo, author_only*/\n\t\tvar styleSheets;\n\t\tvar result = [];\n\t\tvar sheet;\n\t\tvar rules;\n\t\tvar rule;\n\n\t\t// get stylesheets and convert to a regular Array\n\t\tstyleSheets = toArray(window.document.styleSheets);\n\n\t\t// assuming the browser hands us stylesheets in order of appearance\n\t\t// we iterate them from the beginning to follow proper cascade order\n\t\twhile (sheet = styleSheets.shift()) {\n\t\t\t// get the style rules of this sheet\n\t\t\trules = getSheetRules(sheet);\n\n\t\t\t// loop the rules in order of appearance\n\t\t\twhile (rule = rules.shift()) {\n\t\t\t\t// if this is an @import rule\n\t\t\t\tif (rule.styleSheet) {\n\t\t\t\t\t// insert the imported stylesheet's rules at the beginning of this stylesheet's rules\n\t\t\t\t\trules = getSheetRules(rule.styleSheet).concat(rules);\n\t\t\t\t\t// and skip this rule\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// if there's no stylesheet attribute BUT there IS a media attribute it's a media rule\n\t\t\t\telse if (rule.media) {\n\t\t\t\t\t// insert the contained rules of this media rule to the beginning of this stylesheet's rules\n\t\t\t\t\trules = getSheetRules(rule).concat(rules);\n\t\t\t\t\t// and skip it\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// check if this element matches this rule's selector\n\t\t\t\tif (element.closest(rule.selectorText)) {\n\t\t\t\t\t// push the rule to the results set\n\t\t\t\t\tresult.push(rule);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// sort according to specificity\n\t\treturn sortBySpecificity(element, result);\n\t};\n}());\n\n/*\r\n * raf.js\r\n * https://github.com/ngryman/raf.js\r\n *\r\n * original requestAnimationFrame polyfill by Erik MÃ¶ller\r\n * inspired from paul_irish gist and post\r\n *\r\n * Copyright (c) 2013 ngryman\r\n * Licensed under the MIT license.\r\n */\r\n\r\n(function(window) {\r\n\tvar lastTime = 0,\r\n\t\tvendors = ['webkit', 'moz'],\r\n\t\trequestAnimationFrame = window.requestAnimationFrame,\r\n\t\tcancelAnimationFrame = window.cancelAnimationFrame,\r\n\t\ti = vendors.length;\r\n\r\n\t// try to un-prefix existing raf\r\n\twhile (--i >= 0 && !requestAnimationFrame) {\r\n\t\trequestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame'];\r\n\t\tcancelAnimationFrame = window[vendors[i] + 'CancelAnimationFrame'];\r\n\t}\r\n\r\n\t// polyfill with setTimeout fallback\r\n\t// heavily inspired from @darius gist mod: https://gist.github.com/paulirish/1579671#comment-837945\r\n\tif (!requestAnimationFrame || !cancelAnimationFrame) {\r\n\t\trequestAnimationFrame = function(callback) {\r\n\t\t\tvar now = +new Date(), nextTime = Math.max(lastTime + 16, now);\r\n\t\t\treturn setTimeout(function() {\r\n\t\t\t\tcallback(lastTime = nextTime);\r\n\t\t\t}, nextTime - now);\r\n\t\t};\r\n\r\n\t\tcancelAnimationFrame = clearTimeout;\r\n\t}\r\n\r\n\t// export to window\r\n\twindow.requestAnimationFrame = requestAnimationFrame;\r\n\twindow.cancelAnimationFrame = cancelAnimationFrame;\r\n}(window));\r\n\n/*!\n * Polyfill CSS object-fit\n * http://helloanselm.com/object-fit\n *\n * @author: Anselm Hannemann <hello@anselm-hannemann.com>\n * @author: Christian \"Schepp\" Schaefer <schaepp@gmx.de>\n * @version: 0.3.4\n *\n */\n\n(function (global) {\n\n\t'use strict';\n\n\t// Storage variable\n\tvar objectFit = {};\n\n\tobjectFit._debug = false;\n\n\tobjectFit.observer = null;\n\n\tobjectFit.disableCrossDomain = 'false';\n\n\tobjectFit.getComputedStyle = function(element, context) {\n\t\tcontext = context || window;\n\n\t\tif (context.getComputedStyle) {\n\t\t\treturn context.getComputedStyle(element, null);\n\t\t}\n\t\telse {\n\t\t\treturn element.currentStyle;\n\t\t}\n\t};\n\n\tobjectFit.getDefaultComputedStyle = function(element){\n\t\tvar newelement = element.cloneNode(true);\n\t\tvar styles = {};\n\t\tvar iframe = document.createElement('iframe');\n\t\tdocument.body.appendChild(iframe);\n\t\tiframe.contentWindow.document.open();\n\t\tiframe.contentWindow.document.write('<body></body>');\n\t\tiframe.contentWindow.document.body.appendChild(newelement);\n\t\tiframe.contentWindow.document.close();\n\n\t\tvar defaultElement = iframe.contentWindow.document.querySelectorAll(element.nodeName.toLowerCase())[0];\n\t\tvar defaultComputedStyle = this.getComputedStyle(defaultElement, iframe.contentWindow);\n\t\tvar value;\n\t\tvar property;\n\n\t\tfor (property in defaultComputedStyle) {\n\t\t\tif (defaultComputedStyle.getPropertyValue === true) {\n\t\t\t\tvalue = defaultComputedStyle.getPropertyValue(property);\n\t\t\t} else {\n\t\t\t\tvalue = defaultComputedStyle[property];\n\t\t\t}\n\n\t\t\tif (value !== null) {\n\t\t\t\tswitch (property) {\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstyles[property] = value;\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'width':\n\t\t\t\t\tcase 'height':\n\t\t\t\t\tcase 'minWidth':\n\t\t\t\t\tcase 'minHeight':\n\t\t\t\t\tcase 'maxWidth':\n\t\t\t\t\tcase 'maxHeight':\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdocument.body.removeChild(iframe);\n\n\t\treturn styles;\n\t};\n\n\tobjectFit.getMatchedStyle = function(element, property){\n\t\t// element property has highest priority\n\t\tvar val = null;\n\t\tvar inlineval = null;\n\n\t\tif (element.style.getPropertyValue) {\n\t\t\tinlineval = element.style.getPropertyValue(property);\n\t\t} else if (element.currentStyle) {\n\t\t\tinlineval = element.currentStyle[property];\n\t\t}\n\n\t\t// get matched rules\n\t\tvar rules = window.getMatchedCSSRules(element);\n\t\tvar i = rules.length;\n\t\tvar r;\n\t\tvar important;\n\n\t\tif (i) {\n\t\t\t// iterate the rules backwards\n\t\t\t// rules are ordered by priority, highest last\n\t\t\tfor (; i --> 0;) {\n\t\t\t\tr = rules[i];\n\t\t\t\timportant = r.style.getPropertyPriority(property);\n\n\t\t\t\t// if set, only reset if important\n\t\t\t\tif (val === null || important) {\n\t\t\t\t\tval = r.style.getPropertyValue(property);\n\n\t\t\t\t\t// done if important\n\t\t\t\t\tif (important) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if it's important, we are done\n\t\tif (!val && inlineval !== null) {\n\t\t\tval = inlineval;\n\t\t}\n\n\t\treturn val;\n\t};\n\n\t// Detects orientation\n\tobjectFit.orientation = function(replacedElement) {\n\t\tif (replacedElement.parentNode && replacedElement.parentNode.nodeName.toLowerCase() === 'x-object-fit') {\n\t\t\tvar width = replacedElement.naturalWidth || replacedElement.clientWidth;\n\t\t\tvar height = replacedElement.naturalHeight || replacedElement.clientHeight;\n\t\t\tvar parentWidth = replacedElement.parentNode.clientWidth;\n\t\t\tvar parentHeight = replacedElement.parentNode.clientHeight;\n\n\t\t\tif (!height || width / height > parentWidth / parentHeight) {\n\t\t\t\tif (replacedElement.getAttribute('data-x-object-relation') !== 'wider') {\n\t\t\t\t\treplacedElement.setAttribute('data-x-object-relation','wider');\n\t\t\t\t\treplacedElement.className += ' x-object-fit-wider';\n\n\t\t\t\t\tif (this._debug && window.console) {\n\t\t\t\t\t\tconsole.log('x-object-fit-wider');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (replacedElement.getAttribute('data-x-object-relation') !== 'taller') {\n\t\t\t\t\treplacedElement.setAttribute('data-x-object-relation','taller');\n\t\t\t\t\treplacedElement.className += ' x-object-fit-taller';\n\n\t\t\t\t\tif (this._debug && window.console) {\n\t\t\t\t\t\tconsole.log('x-object-fit-taller');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tobjectFit.process = function(args) {\n\t\tif (!args.selector || !args.replacedElements) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set option objectFit.disableCrossDomain\n\t\tobjectFit.disableCrossDomain = args.disableCrossDomain || 'false';\n\n\t\t// Set option fit-type\n\t\targs.fittype = args.fittype || 'none';\n\n\t\tswitch (args.fittype) {\n\t\t\tdefault:\n\t\t\t\treturn;\n\n\t\t\tcase 'none':\n\t\t\tcase 'fill':\n\t\t\tcase 'contain':\n\t\t\tcase 'cover':\n\t\t\tbreak;\n\t\t}\n\n\t\t// Set option replacedElements\n\t\tvar replacedElements = args.replacedElements;\n\n\t\tif(!replacedElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, replacedElementsLength = replacedElements.length; i < replacedElementsLength; i++) {\n\t\t\tthis.processElement(replacedElements[i], args);\n\t\t}\n\t};\n\n\tobjectFit.processElement = function(replacedElement, args) {\n\t\tvar property;\n\t\tvar value;\n\t\tvar replacedElementStyles = objectFit.getComputedStyle(replacedElement);\n\t\tvar replacedElementDefaultStyles = objectFit.getDefaultComputedStyle(replacedElement);\n\t\tvar wrapperElement = document.createElement('x-object-fit');\n\n\t\tif (objectFit._debug && window.console) {\n\t\t\tconsole.log('Applying to WRAPPER-------------------------------------------------------');\n\t\t}\n\n\t\tfor (property in replacedElementStyles) {\n\t\t\tswitch (property) {\n\t\t\t\tdefault:\n\t\t\t\t\tvalue = objectFit.getMatchedStyle(replacedElement, property);\n\n\t\t\t\t\tif (value !== null && value !== '') {\n\t\t\t\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\t\t\t\tconsole.log(property + ': ' + value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twrapperElement.style[property] = value;\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'length':\n\t\t\t\tcase 'parentRule':\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (objectFit._debug && window.console) {\n\t\t\tconsole.log('Applying to REPLACED ELEMENT-------------------------------------------------------');\n\t\t}\n\t\tfor (property in replacedElementDefaultStyles) {\n\t\t\tswitch (property) {\n\t\t\t\tdefault:\n\t\t\t\t\tvalue = replacedElementDefaultStyles[property];\n\n\t\t\t\t\tif (objectFit._debug && window.console && value !== '') {\n\t\t\t\t\t\tconsole.log(property + ': ' + value);\n\n\t\t\t\t\t\tif (replacedElement.style[property] === undefined) {\n\t\t\t\t\t\t\tconsole.log('Indexed style properties (`' + property + '`) not supported in: ' + window.navigator.userAgent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (replacedElement.style[property]) {\n\t\t\t\t\t\treplacedElement.style[property] = value; // should work in Firefox 35+ and all other browsers\n\t\t\t\t\t} else {\n\t\t\t\t\t\treplacedElement.style.property = value;\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'length':\n\t\t\t\tcase 'parentRule':\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\twrapperElement.setAttribute('class','x-object-fit-' + args.fittype);\n\t\treplacedElement.parentNode.insertBefore(wrapperElement, replacedElement);\n\t\twrapperElement.appendChild(replacedElement);\n\n\t\tobjectFit.orientation(replacedElement);\n\n\t\tvar resizeTimer = null;\n\t\tvar resizeAction = function () {\n\t\t\tif (resizeTimer !== null) {\n\t\t\t\twindow.cancelAnimationFrame(resizeTimer);\n\t\t\t}\n\t\t\tresizeTimer = window.requestAnimationFrame(function(){\n\t\t\t\tobjectFit.orientation(replacedElement);\n\t\t\t});\n\t\t};\n\n\t\tswitch (args.fittype) {\n\t\t\tdefault:\n\t\t\tbreak;\n\n\t\t\tcase 'contain':\n\t\t\tcase 'cover':\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\treplacedElement.addEventListener('load', resizeAction, false);\n\t\t\t\t\twindow.addEventListener('resize', resizeAction, false);\n\t\t\t\t\twindow.addEventListener('orientationchange', resizeAction, false);\n\t\t\t\t} else {\n\t\t\t\t\treplacedElement.attachEvent('onload', resizeAction);\n\t\t\t\t\twindow.attachEvent('onresize', resizeAction);\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t};\n\n\tobjectFit.listen = function (args) {\n\t\tvar domInsertedAction = function (element){\n\t\t\tvar i = 0;\n\t\t\tvar argsLength = args.length;\n\n\t\t\tfor (; i < argsLength; i++) {\n\t\t\t\tif ((element.mozMatchesSelector && element.mozMatchesSelector(args[i].selector)) ||\n\t\t\t\t\t(element.msMatchesSelector && element.msMatchesSelector(args[i].selector)) ||\n\t\t\t\t\t(element.oMatchesSelector && element.oMatchesSelector(args[i].selector)) ||\n\t\t\t\t\t(element.webkitMatchesSelector && element.webkitMatchesSelector(args[i].selector))\n\t\t\t\t) {\n\t\t\t\t\targs[i].replacedElements = [element];\n\t\t\t\t\tobjectFit.process(args[i]);\n\n\t\t\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\t\t\tconsole.log('Matching node inserted: ' + element.nodeName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar domInsertedObserverFunction = function (element) {\n\t\t\tobjectFit.observer.disconnect();\n\t\t\tdomInsertedAction(element);\n\t\t\tobjectFit.observer.observe(document.documentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t};\n\n\t\tvar domInsertedEventFunction = function (event) {\n\t\t\twindow.removeEventListener('DOMNodeInserted', domInsertedEventFunction, false);\n\t\t\tdomInsertedAction(event.target);\n\t\t\twindow.addEventListener('DOMNodeInserted', domInsertedEventFunction, false);\n\t\t};\n\n\t\tvar domRemovedAction = function (element) {\n\t\t\tif (element.nodeName.toLowerCase() === 'x-object-fit') {\n\t\t\t\telement.parentNode.removeChild(element);\n\n\t\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\t\tconsole.log('Matching node removed: ' + element.nodeName);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar domRemovedObserverFunction = function (element) {\n\t\t\tobjectFit.observer.disconnect();\n\t\t\tdomRemovedAction(element);\n\t\t\tobjectFit.observer.observe(document.documentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t};\n\n\t\tvar domRemovedEventFunction = function (event) {\n\t\t\twindow.removeEventListener('DOMNodeRemoved', domRemovedEventFunction, false);\n\t\t\tdomRemovedAction(event.target.parentNode);\n\t\t\twindow.addEventListener('DOMNodeRemoved', domRemovedEventFunction, false);\n\t\t};\n\n\t\tif (window.MutationObserver) {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('DOM MutationObserver');\n\t\t\t}\n\n\t\t\tthis.observer = new MutationObserver(function(mutations) {\n\t\t\t\tmutations.forEach(function(mutation) {\n\t\t\t\t\tif (mutation.addedNodes && mutation.addedNodes.length) {\n\t\t\t\t\t\tvar nodes = mutation.addedNodes;\n\t\t\t\t\t\tfor (var i = 0, nodesLength = nodes.length; i < nodesLength; i++) {\n\t\t\t\t\t\t\tdomInsertedObserverFunction(nodes[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (mutation.removedNodes && mutation.removedNodes.length) {\n\t\t\t\t\t\tdomRemovedObserverFunction(mutation.target);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.observer.observe(document.documentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t} else if (window.addEventListener) {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('DOM Mutation Events');\n\t\t\t}\n\n\t\t\twindow.addEventListener('DOMNodeInserted', domInsertedEventFunction, false);\n\t\t\twindow.addEventListener('DOMNodeRemoved', domRemovedEventFunction, false);\n\t\t}\n\t};\n\n\tobjectFit.init = function (args) {\n\t\tif (!args) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(args instanceof Array)) {\n\t\t\targs = [args];\n\t\t}\n\n\t\tvar i = 0;\n\t\tvar argsLength = args.length;\n\n\t\tfor (; i < argsLength; i++) {\n\t\t\targs[i].replacedElements = document.querySelectorAll(args[i].selector);\n\t\t\tthis.process(args[i]);\n\t\t}\n\n\t\tthis.listen(args);\n\t};\n\n\tobjectFit.polyfill = function (args) {\n\t\tif('objectFit' in document.documentElement.style === false) {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('object-fit not natively supported');\n\t\t\t}\n\n\t\t\t// If the library is loaded after document onload event\n\t\t\tif (document.readyState === 'complete') {\n\t\t\t\tobjectFit.init(args);\n\t\t\t} else {\n\t\t\t\t// Otherwise attach event listeners\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function(){\n\t\t\t\t\t\tobjectFit.init(args);\n\t\t\t\t\t}, false);\n\t\t\t\t} else {\n\t\t\t\t\twindow.attachEvent('onload', function(){\n\t\t\t\t\t\tobjectFit.init(args);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('object-fit natively supported');\n\t\t\t}\n\t\t}\n\t};\n\n\t/*\n\t * AMD, module loader, global registration\n\t */\n\n\t// Expose modal for loaders that implement the Node module pattern.\n\tif (typeof module === 'object' && module && typeof module.exports === 'object') {\n\t\tmodule.exports = objectFit;\n\n\t// Register as an AMD module\n\t} else if (typeof define === 'function' && define.amd) {\n\t\tdefine([], function () { return objectFit; });\n\n\t// Export into global space\n\t} else if (typeof global === 'object' && typeof global.document === 'object') {\n\t\tglobal.objectFit = objectFit;\n\t}\n\n}(window));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-fit/dist/polyfill.object-fit.js\n// module id = 3\n// module chunks = 1","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 4\n// module chunks = 1"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDk4ZjM3MTZlYWQxYjZlMjNmYWI/ZDFjNyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9vYmplY3QtZml0LXBvbHlmaWxsLmpzIiwid2VicGFjazovLy8uL34vb2JqZWN0LWZpdC9kaXN0L3BvbHlmaWxsLm9iamVjdC1maXQuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qcyJdLCJuYW1lcyI6WyJ0b2dnbGVNZW51IiwiYnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVudSIsImJvZHkiLCJleHBhbmRlZCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIlN0cmluZyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwb2x5ZmlsbCIsInNlbGVjdG9yIiwiZml0dHlwZSJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7OztBQ3RDQTs7QUFDQSx3Qjs7Ozs7Ozs7QUNEQSxLQUFNQSxhQUFhLFNBQWJBLFVBQWEsR0FBTTtBQUN2QixPQUFNQyxTQUFTQyxTQUFTQyxhQUFULENBQXVCLGdCQUF2QixDQUFmO0FBQ0EsT0FBTUMsT0FBT0YsU0FBU0MsYUFBVCxDQUF1QixhQUF2QixDQUFiO0FBQ0EsT0FBTUUsT0FBT0gsU0FBU0MsYUFBVCxDQUF1QixNQUF2QixDQUFiOztBQUVBLE9BQU1HLFdBQVdMLE9BQU9NLFlBQVAsQ0FBb0IsZUFBcEIsTUFBeUMsTUFBMUQ7QUFDQU4sVUFBT08sWUFBUCxDQUFvQixlQUFwQixFQUFxQ0MsT0FBTyxDQUFDSCxRQUFSLENBQXJDO0FBQ0FGLFFBQUtNLFNBQUwsQ0FBZUMsTUFBZixDQUFzQixXQUF0QixFQUFtQyxDQUFDTCxRQUFwQztBQUNBRCxRQUFLSyxTQUFMLENBQWVDLE1BQWYsQ0FBc0IsV0FBdEIsRUFBbUMsQ0FBQ0wsUUFBcEM7QUFDRCxFQVREOztBQVlBLEVBQUMsWUFBTTtBQUNMLE9BQU1MLFNBQVNDLFNBQVNDLGFBQVQsQ0FBdUIsZ0JBQXZCLENBQWY7QUFDQUYsVUFBT1csZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUNaLFVBQWpDO0FBQ0QsRUFIRCxJOzs7Ozs7OztBQ1pBOzs7Ozs7QUFFQSxxQkFBVWEsUUFBVixDQUFtQjtBQUNqQkMsYUFBVSxjQURPLEVBQ1M7QUFDMUJDLFlBQVMsT0FGUSxDQUVDO0FBRkQsRUFBbkIsRTs7Ozs7O2lFQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFRLGdCQUFnQjtBQUN4QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSTtBQUNKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBUyxTQUFTO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG9FQUFtRSw0QkFBNEI7QUFDL0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtDQUE4QztBQUM5QyxPQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCxpQkFBaUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMLEtBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSTtBQUNKLElBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsU0FBUSxnQkFBZ0I7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFNO0FBQ04sTUFBSztBQUNMO0FBQ0E7QUFDQSxPQUFNO0FBQ047QUFDQTtBQUNBLElBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFFO0FBQ0YscUZBQTBCLGtCQUFrQixFQUFFOztBQUU5QztBQUNBLEdBQUU7QUFDRjtBQUNBOztBQUVBLEVBQUM7Ozs7Ozs7O0FDdHNCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJmdW5jdGlvbnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0OThmMzcxNmVhZDFiNmUyM2ZhYiIsImltcG9ydCAnLi9tZW51JztcbmltcG9ydCAnLi9vYmplY3QtZml0LXBvbHlmaWxsJztcbi8vIGltcG9ydCAnLi9zZXJ2aWNlLXdvcmtlcic7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0cy9mdW5jdGlvbnMuanMiLCJjb25zdCB0b2dnbGVNZW51ID0gKCkgPT4ge1xuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fdHJpZ2dlcicpO1xuICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX2xpc3QnKTtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuICBjb25zdCBleHBhbmRlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnO1xuICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgU3RyaW5nKCFleHBhbmRlZCkpO1xuICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScsICFleHBhbmRlZCk7XG4gIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaXMtYWN0aXZlJywgIWV4cGFuZGVkKTtcbn07XG5cblxuKCgpID0+IHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX3RyaWdnZXInKTtcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSk7XG59KSgpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvbWVudS5qcyIsImltcG9ydCBvYmplY3RGaXQgZnJvbSAnb2JqZWN0LWZpdCc7XG5cbm9iamVjdEZpdC5wb2x5ZmlsbCh7XG4gIHNlbGVjdG9yOiAnLmhlcm9fX2ltYWdlJywgLy8gdGhpcyBjYW4gYmUgYW55IENTUyBzZWxlY3RvclxuICBmaXR0eXBlOiAnY292ZXInLCAvLyBlaXRoZXIgY29udGFpbiwgY292ZXIsIGZpbGwgb3Igbm9uZVxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0cy9vYmplY3QtZml0LXBvbHlmaWxsLmpzIiwiKGZ1bmN0aW9uIChFTEVNRU5UKSB7XG5cdEVMRU1FTlQubWF0Y2hlcyA9IEVMRU1FTlQubWF0Y2hlcyB8fCBFTEVNRU5ULm1vek1hdGNoZXNTZWxlY3RvciB8fCBFTEVNRU5ULm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVMRU1FTlQub01hdGNoZXNTZWxlY3RvciB8fCBFTEVNRU5ULndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBmdW5jdGlvbiBtYXRjaGVzKHNlbGVjdG9yKSB7XG5cdFx0dmFyXG5cdFx0ZWxlbWVudCA9IHRoaXMsXG5cdFx0ZWxlbWVudHMgPSAoZWxlbWVudC5kb2N1bWVudCB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLFxuXHRcdGluZGV4ID0gMDtcblxuXHRcdHdoaWxlIChlbGVtZW50c1tpbmRleF0gJiYgZWxlbWVudHNbaW5kZXhdICE9PSBlbGVtZW50KSB7XG5cdFx0XHQrK2luZGV4O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtZW50c1tpbmRleF0gPyB0cnVlIDogZmFsc2U7XG5cdH07XG5cblx0RUxFTUVOVC5jbG9zZXN0ID0gRUxFTUVOVC5jbG9zZXN0IHx8IGZ1bmN0aW9uIGNsb3Nlc3Qoc2VsZWN0b3IpIHtcblx0XHR2YXIgZWxlbWVudCA9IHRoaXM7XG5cblx0XHR3aGlsZSAoZWxlbWVudCkge1xuXHRcdFx0aWYgKGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH07XG59KEVsZW1lbnQucHJvdG90eXBlKSk7XG5cbi8qIVxuICogQSBwb2x5ZmlsbCBmb3IgV2Via2l0J3Mgd2luZG93LmdldE1hdGNoZWRDU1NSdWxlcywgYmFzZWQgb25cbiAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3lkYW5pdi8zMDMzMDEyXG4gKlxuICogQGF1dGhvcjogWWVob25hdGFuIERhbml2XG4gKiBAYXV0aG9yOiBzc2FmZWphdmFcbiAqIEBhdXRob3I6IENocmlzdGlhbiBcIlNjaGVwcFwiIFNjaGFlZmVyIDxzY2hhZXBwQGdteC5kZT5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHQvLyBwb2x5ZmlsbCB3aW5kb3cuZ2V0TWF0Y2hlZENTU1J1bGVzKCkgaW4gRmlyZUZveCA2K1xuXHRpZiAodHlwZW9mIHdpbmRvdy5nZXRNYXRjaGVkQ1NTUnVsZXMgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHR2YXIgRUxFTUVOVF9SRSA9IC9bXFx3LV0rL2csXG5cdFx0SURfUkUgPSAvI1tcXHctXSsvZyxcblx0XHRDTEFTU19SRSA9IC9cXC5bXFx3LV0rL2csXG5cdFx0QVRUUl9SRSA9IC9cXFtbXlxcXV0rXFxdL2csXG5cdFx0Ly8gOm5vdCgpIHBzZXVkby1jbGFzcyBkb2VzIG5vdCBhZGQgdG8gc3BlY2lmaWNpdHksIGJ1dCBpdHMgY29udGVudCBkb2VzIGFzIGlmIGl0IHdhcyBvdXRzaWRlIGl0XG5cdFx0UFNFVURPX0NMQVNTRVNfUkUgPSAvXFw6KD8hbm90KVtcXHctXSsoXFwoLipcXCkpPy9nLFxuXHRcdFBTRVVET19FTEVNRU5UU19SRSA9IC9cXDpcXDo/KGFmdGVyfGJlZm9yZXxmaXJzdC1sZXR0ZXJ8Zmlyc3QtbGluZXxzZWxlY3Rpb24pL2c7XG5cblx0Ly8gY29udmVydCBhbiBhcnJheS1saWtlIG9iamVjdCB0byBhcnJheVxuXHR2YXIgdG9BcnJheSA9IGZ1bmN0aW9uIChsaXN0KSB7XG5cdFx0dmFyIGl0ZW1zID0gW107XG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciBsaXN0TGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cblx0XHRmb3IgKDsgaSA8IGxpc3RMZW5ndGg7IGkrKykge1xuXHRcdFx0aXRlbXMucHVzaChsaXN0W2ldKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaXRlbXM7XG5cdH07XG5cblx0Ly8gZ2V0IGhvc3Qgb2Ygc3R5bGVzaGVldFxuXHR2YXIgZ2V0Q1NTSG9zdCA9IGZ1bmN0aW9uIChocmVmKSB7XG5cdFx0dmFyIGZha2VMaW5rT2ZTaGVldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblxuXHRcdGZha2VMaW5rT2ZTaGVldC5ocmVmID0gaHJlZjtcblxuXHRcdHJldHVybiBmYWtlTGlua09mU2hlZXQuaG9zdDtcblx0fTtcblxuXHQvLyBoYW5kbGVzIGV4dHJhY3Rpb24gb2YgYGNzc1J1bGVzYCBhcyBhbiBgQXJyYXlgIGZyb20gYSBzdHlsZXNoZWV0IG9yIHNvbWV0aGluZyB0aGF0IGJlaGF2ZXMgdGhlIHNhbWVcblx0dmFyIGdldFNoZWV0UnVsZXMgPSBmdW5jdGlvbiAoc3R5bGVzaGVldCkge1xuXHRcdHZhciBzaGVldE1lZGlhID0gc3R5bGVzaGVldC5tZWRpYSAmJiBzdHlsZXNoZWV0Lm1lZGlhLm1lZGlhVGV4dDtcblx0XHR2YXIgc2hlZXRIb3N0O1xuXG5cdFx0Ly8gaWYgdGhpcyBzaGVldCBpcyBjcm9zcy1vcmlnaW4gYW5kIG9wdGlvbiBpcyBzZXQgc2tpcCBpdFxuXHRcdGlmIChvYmplY3RGaXQuZGlzYWJsZUNyb3NzRG9tYWluID09ICd0cnVlJykge1xuXHRcdFx0c2hlZXRIb3N0ID0gZ2V0Q1NTSG9zdChzdHlsZXNoZWV0LmhyZWYpO1xuXG5cdFx0XHRpZiAoKHNoZWV0SG9zdCAhPT0gd2luZG93LmxvY2F0aW9uLmhvc3QpKSB7XG5cdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdH1cblx0XHR9XG5cblxuXHRcdC8vIGlmIHRoaXMgc2hlZXQgaXMgZGlzYWJsZWQgc2tpcCBpdFxuXHRcdGlmIChzdHlsZXNoZWV0LmRpc2FibGVkKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0aWYgKCF3aW5kb3cubWF0Y2hNZWRpYSkge1xuXHRcdFx0aWYgKHNoZWV0TWVkaWEgJiYgc2hlZXRNZWRpYS5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBpZiB0aGlzIHNoZWV0J3MgbWVkaWEgaXMgc3BlY2lmaWVkIGFuZCBkb2Vzbid0IG1hdGNoIHRoZSB2aWV3cG9ydCB0aGVuIHNraXAgaXRcblx0XHRlbHNlIGlmIChzaGVldE1lZGlhICYmIHNoZWV0TWVkaWEubGVuZ3RoICYmICEgd2luZG93Lm1hdGNoTWVkaWEoc2hlZXRNZWRpYSkubWF0Y2hlcykge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdC8vIGdldCB0aGUgc3R5bGUgcnVsZXMgb2YgdGhpcyBzaGVldFxuXHRcdHJldHVybiB0b0FycmF5KHN0eWxlc2hlZXQuY3NzUnVsZXMpO1xuXHR9O1xuXG5cdHZhciBfZmluZCA9IGZ1bmN0aW9uIChzdHJpbmcsIHJlKSB7XG5cdFx0dmFyIG1hdGNoZXMgPSBzdHJpbmcubWF0Y2gocmUpO1xuXG5cdFx0cmV0dXJuIHJlID8gcmUubGVuZ3RoIDogMDtcblx0fTtcblxuXHQvLyBjYWxjdWxhdGVzIHRoZSBzcGVjaWZpY2l0eSBvZiBhIGdpdmVuIGBzZWxlY3RvcmBcblx0dmFyIGNhbGN1bGF0ZVNjb3JlID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG5cdFx0dmFyIHNjb3JlID0gWzAsIDAsIDBdO1xuXHRcdHZhciBwYXJ0cyA9IHNlbGVjdG9yLnNwbGl0KCcgJyk7XG5cdFx0dmFyIHBhcnQ7XG5cdFx0dmFyIG1hdGNoO1xuXG5cdFx0Ly9UT0RPOiBjbGVhbiB0aGUgJzpub3QnIHBhcnQgc2luY2UgdGhlIGxhc3QgRUxFTUVOVF9SRSB3aWxsIHBpY2sgaXQgdXBcblx0XHR3aGlsZSAocGFydCA9IHBhcnRzLnNoaWZ0KCksIHR5cGVvZiBwYXJ0ID09PSAnc3RyaW5nJykge1xuXHRcdFx0Ly8gZmluZCBhbGwgcHNldWRvLWVsZW1lbnRzXG5cdFx0XHRtYXRjaCA9IF9maW5kKHBhcnQsIFBTRVVET19FTEVNRU5UU19SRSk7XG5cdFx0XHRzY29yZVsyXSA9IG1hdGNoO1xuXHRcdFx0Ly8gYW5kIHJlbW92ZSB0aGVtXG5cdFx0XHRtYXRjaCAmJiAocGFydCA9IHBhcnQucmVwbGFjZShQU0VVRE9fRUxFTUVOVFNfUkUsICcnKSk7XG5cdFx0XHQvLyBmaW5kIGFsbCBwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0bWF0Y2ggPSBfZmluZChwYXJ0LCBQU0VVRE9fQ0xBU1NFU19SRSk7XG5cdFx0XHRzY29yZVsxXSA9IG1hdGNoO1xuXHRcdFx0Ly8gYW5kIHJlbW92ZSB0aGVtXG5cdFx0XHRtYXRjaCAmJiAocGFydCA9IHBhcnQucmVwbGFjZShQU0VVRE9fQ0xBU1NFU19SRSwgJycpKTtcblx0XHRcdC8vIGZpbmQgYWxsIGF0dHJpYnV0ZXNcblx0XHRcdG1hdGNoID0gX2ZpbmQocGFydCwgQVRUUl9SRSk7XG5cdFx0XHRzY29yZVsxXSArPSBtYXRjaDtcblx0XHRcdC8vIGFuZCByZW1vdmUgdGhlbVxuXHRcdFx0bWF0Y2ggJiYgKHBhcnQgPSBwYXJ0LnJlcGxhY2UoQVRUUl9SRSwgJycpKTtcblx0XHRcdC8vIGZpbmQgYWxsIElEc1xuXHRcdFx0bWF0Y2ggPSBfZmluZChwYXJ0LCBJRF9SRSk7XG5cdFx0XHRzY29yZVswXSA9IG1hdGNoO1xuXHRcdFx0Ly8gYW5kIHJlbW92ZSB0aGVtXG5cdFx0XHRtYXRjaCAmJiAocGFydCA9IHBhcnQucmVwbGFjZShJRF9SRSwgJycpKTtcblx0XHRcdC8vIGZpbmQgYWxsIGNsYXNzZXNcblx0XHRcdG1hdGNoID0gX2ZpbmQocGFydCwgQ0xBU1NfUkUpO1xuXHRcdFx0c2NvcmVbMV0gKz0gbWF0Y2g7XG5cdFx0XHQvLyBhbmQgcmVtb3ZlIHRoZW1cblx0XHRcdG1hdGNoICYmIChwYXJ0ID0gcGFydC5yZXBsYWNlKENMQVNTX1JFLCAnJykpO1xuXHRcdFx0Ly8gZmluZCBhbGwgZWxlbWVudHNcblx0XHRcdHNjb3JlWzJdICs9IF9maW5kKHBhcnQsIEVMRU1FTlRfUkUpO1xuXHRcdH1cblxuXHRcdHJldHVybiBwYXJzZUludChzY29yZS5qb2luKCcnKSwgMTApO1xuXHR9O1xuXG5cdC8vIHJldHVybnMgdGhlIGhlaWdodHMgcG9zc2libGUgc3BlY2lmaWNpdHkgc2NvcmUgYW4gZWxlbWVudCBjYW4gZ2V0IGZyb20gYSBnaXZlIHJ1bGUncyBzZWxlY3RvclRleHRcblx0dmFyIGdldFNwZWNpZmljaXR5U2NvcmUgPSBmdW5jdGlvbiAoZWxlbWVudCwgc2VsZWN0b3JUZXh0KSB7XG5cdFx0dmFyIHNlbGVjdG9ycyA9IHNlbGVjdG9yVGV4dC5zcGxpdCgnLCcpLFxuXHRcdFx0c2VsZWN0b3IsIHNjb3JlLCByZXN1bHQgPSAwO1xuXG5cdFx0d2hpbGUgKHNlbGVjdG9yID0gc2VsZWN0b3JzLnNoaWZ0KCkpIHtcblx0XHRcdGlmIChlbGVtZW50LmNsb3Nlc3Qoc2VsZWN0b3IpKSB7XG5cdFx0XHRcdHNjb3JlID0gY2FsY3VsYXRlU2NvcmUoc2VsZWN0b3IpO1xuXHRcdFx0XHRyZXN1bHQgPSBzY29yZSA+IHJlc3VsdCA/IHNjb3JlIDogcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0dmFyIHNvcnRCeVNwZWNpZmljaXR5ID0gZnVuY3Rpb24gKGVsZW1lbnQsIHJ1bGVzKSB7XG5cdFx0Ly8gY29tcGFyaW5nIGZ1bmN0aW9uIHRoYXQgc29ydHMgQ1NTU3R5bGVSdWxlcyBhY2NvcmRpbmcgdG8gc3BlY2lmaWNpdHkgb2YgdGhlaXIgYHNlbGVjdG9yVGV4dGBcblx0XHR2YXIgY29tcGFyZVNwZWNpZmljaXR5ID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0XHRcdHJldHVybiBnZXRTcGVjaWZpY2l0eVNjb3JlKGVsZW1lbnQsIGIuc2VsZWN0b3JUZXh0KSAtIGdldFNwZWNpZmljaXR5U2NvcmUoZWxlbWVudCwgYS5zZWxlY3RvclRleHQpO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gcnVsZXMuc29ydChjb21wYXJlU3BlY2lmaWNpdHkpO1xuXHR9O1xuXG5cdC8vVE9ETzogbm90IHN1cHBvcnRpbmcgMm5kIGFyZ3VtZW50IGZvciBzZWxlY3RpbmcgcHNldWRvIGVsZW1lbnRzXG5cdC8vVE9ETzogbm90IHN1cHBvcnRpbmcgM3JkIGFyZ3VtZW50IGZvciBjaGVja2luZyBhdXRob3Igc3R5bGUgc2hlZXRzIG9ubHlcblx0d2luZG93LmdldE1hdGNoZWRDU1NSdWxlcyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7ICAvKiwgcHNldWRvLCBhdXRob3Jfb25seSovXG5cdFx0dmFyIHN0eWxlU2hlZXRzO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR2YXIgc2hlZXQ7XG5cdFx0dmFyIHJ1bGVzO1xuXHRcdHZhciBydWxlO1xuXG5cdFx0Ly8gZ2V0IHN0eWxlc2hlZXRzIGFuZCBjb252ZXJ0IHRvIGEgcmVndWxhciBBcnJheVxuXHRcdHN0eWxlU2hlZXRzID0gdG9BcnJheSh3aW5kb3cuZG9jdW1lbnQuc3R5bGVTaGVldHMpO1xuXG5cdFx0Ly8gYXNzdW1pbmcgdGhlIGJyb3dzZXIgaGFuZHMgdXMgc3R5bGVzaGVldHMgaW4gb3JkZXIgb2YgYXBwZWFyYW5jZVxuXHRcdC8vIHdlIGl0ZXJhdGUgdGhlbSBmcm9tIHRoZSBiZWdpbm5pbmcgdG8gZm9sbG93IHByb3BlciBjYXNjYWRlIG9yZGVyXG5cdFx0d2hpbGUgKHNoZWV0ID0gc3R5bGVTaGVldHMuc2hpZnQoKSkge1xuXHRcdFx0Ly8gZ2V0IHRoZSBzdHlsZSBydWxlcyBvZiB0aGlzIHNoZWV0XG5cdFx0XHRydWxlcyA9IGdldFNoZWV0UnVsZXMoc2hlZXQpO1xuXG5cdFx0XHQvLyBsb29wIHRoZSBydWxlcyBpbiBvcmRlciBvZiBhcHBlYXJhbmNlXG5cdFx0XHR3aGlsZSAocnVsZSA9IHJ1bGVzLnNoaWZ0KCkpIHtcblx0XHRcdFx0Ly8gaWYgdGhpcyBpcyBhbiBAaW1wb3J0IHJ1bGVcblx0XHRcdFx0aWYgKHJ1bGUuc3R5bGVTaGVldCkge1xuXHRcdFx0XHRcdC8vIGluc2VydCB0aGUgaW1wb3J0ZWQgc3R5bGVzaGVldCdzIHJ1bGVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhpcyBzdHlsZXNoZWV0J3MgcnVsZXNcblx0XHRcdFx0XHRydWxlcyA9IGdldFNoZWV0UnVsZXMocnVsZS5zdHlsZVNoZWV0KS5jb25jYXQocnVsZXMpO1xuXHRcdFx0XHRcdC8vIGFuZCBza2lwIHRoaXMgcnVsZVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGlmIHRoZXJlJ3Mgbm8gc3R5bGVzaGVldCBhdHRyaWJ1dGUgQlVUIHRoZXJlIElTIGEgbWVkaWEgYXR0cmlidXRlIGl0J3MgYSBtZWRpYSBydWxlXG5cdFx0XHRcdGVsc2UgaWYgKHJ1bGUubWVkaWEpIHtcblx0XHRcdFx0XHQvLyBpbnNlcnQgdGhlIGNvbnRhaW5lZCBydWxlcyBvZiB0aGlzIG1lZGlhIHJ1bGUgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGlzIHN0eWxlc2hlZXQncyBydWxlc1xuXHRcdFx0XHRcdHJ1bGVzID0gZ2V0U2hlZXRSdWxlcyhydWxlKS5jb25jYXQocnVsZXMpO1xuXHRcdFx0XHRcdC8vIGFuZCBza2lwIGl0XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBjaGVjayBpZiB0aGlzIGVsZW1lbnQgbWF0Y2hlcyB0aGlzIHJ1bGUncyBzZWxlY3RvclxuXHRcdFx0XHRpZiAoZWxlbWVudC5jbG9zZXN0KHJ1bGUuc2VsZWN0b3JUZXh0KSkge1xuXHRcdFx0XHRcdC8vIHB1c2ggdGhlIHJ1bGUgdG8gdGhlIHJlc3VsdHMgc2V0XG5cdFx0XHRcdFx0cmVzdWx0LnB1c2gocnVsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gc29ydCBhY2NvcmRpbmcgdG8gc3BlY2lmaWNpdHlcblx0XHRyZXR1cm4gc29ydEJ5U3BlY2lmaWNpdHkoZWxlbWVudCwgcmVzdWx0KTtcblx0fTtcbn0oKSk7XG5cbi8qXHJcbiAqIHJhZi5qc1xyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbmdyeW1hbi9yYWYuanNcclxuICpcclxuICogb3JpZ2luYWwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlclxyXG4gKiBpbnNwaXJlZCBmcm9tIHBhdWxfaXJpc2ggZ2lzdCBhbmQgcG9zdFxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMgbmdyeW1hblxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKHdpbmRvdykge1xyXG5cdHZhciBsYXN0VGltZSA9IDAsXHJcblx0XHR2ZW5kb3JzID0gWyd3ZWJraXQnLCAnbW96J10sXHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLFxyXG5cdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUsXHJcblx0XHRpID0gdmVuZG9ycy5sZW5ndGg7XHJcblxyXG5cdC8vIHRyeSB0byB1bi1wcmVmaXggZXhpc3RpbmcgcmFmXHJcblx0d2hpbGUgKC0taSA+PSAwICYmICFyZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW2ldICsgJ1JlcXVlc3RBbmltYXRpb25GcmFtZSddO1xyXG5cdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1tpXSArICdDYW5jZWxBbmltYXRpb25GcmFtZSddO1xyXG5cdH1cclxuXHJcblx0Ly8gcG9seWZpbGwgd2l0aCBzZXRUaW1lb3V0IGZhbGxiYWNrXHJcblx0Ly8gaGVhdmlseSBpbnNwaXJlZCBmcm9tIEBkYXJpdXMgZ2lzdCBtb2Q6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC8xNTc5NjcxI2NvbW1lbnQtODM3OTQ1XHJcblx0aWYgKCFyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgIWNhbmNlbEFuaW1hdGlvbkZyYW1lKSB7XHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG5cdFx0XHR2YXIgbm93ID0gK25ldyBEYXRlKCksIG5leHRUaW1lID0gTWF0aC5tYXgobGFzdFRpbWUgKyAxNiwgbm93KTtcclxuXHRcdFx0cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Y2FsbGJhY2sobGFzdFRpbWUgPSBuZXh0VGltZSk7XHJcblx0XHRcdH0sIG5leHRUaW1lIC0gbm93KTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBjbGVhclRpbWVvdXQ7XHJcblx0fVxyXG5cclxuXHQvLyBleHBvcnQgdG8gd2luZG93XHJcblx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZTtcclxuXHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBjYW5jZWxBbmltYXRpb25GcmFtZTtcclxufSh3aW5kb3cpKTtcclxuXG4vKiFcbiAqIFBvbHlmaWxsIENTUyBvYmplY3QtZml0XG4gKiBodHRwOi8vaGVsbG9hbnNlbG0uY29tL29iamVjdC1maXRcbiAqXG4gKiBAYXV0aG9yOiBBbnNlbG0gSGFubmVtYW5uIDxoZWxsb0BhbnNlbG0taGFubmVtYW5uLmNvbT5cbiAqIEBhdXRob3I6IENocmlzdGlhbiBcIlNjaGVwcFwiIFNjaGFlZmVyIDxzY2hhZXBwQGdteC5kZT5cbiAqIEB2ZXJzaW9uOiAwLjMuNFxuICpcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvLyBTdG9yYWdlIHZhcmlhYmxlXG5cdHZhciBvYmplY3RGaXQgPSB7fTtcblxuXHRvYmplY3RGaXQuX2RlYnVnID0gZmFsc2U7XG5cblx0b2JqZWN0Rml0Lm9ic2VydmVyID0gbnVsbDtcblxuXHRvYmplY3RGaXQuZGlzYWJsZUNyb3NzRG9tYWluID0gJ2ZhbHNlJztcblxuXHRvYmplY3RGaXQuZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbnRleHQpIHtcblx0XHRjb250ZXh0ID0gY29udGV4dCB8fCB3aW5kb3c7XG5cblx0XHRpZiAoY29udGV4dC5nZXRDb21wdXRlZFN0eWxlKSB7XG5cdFx0XHRyZXR1cm4gY29udGV4dC5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsIG51bGwpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBlbGVtZW50LmN1cnJlbnRTdHlsZTtcblx0XHR9XG5cdH07XG5cblx0b2JqZWN0Rml0LmdldERlZmF1bHRDb21wdXRlZFN0eWxlID0gZnVuY3Rpb24oZWxlbWVudCl7XG5cdFx0dmFyIG5ld2VsZW1lbnQgPSBlbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcblx0XHR2YXIgc3R5bGVzID0ge307XG5cdFx0dmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0XHRpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5vcGVuKCk7XG5cdFx0aWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoJzxib2R5PjwvYm9keT4nKTtcblx0XHRpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5ld2VsZW1lbnQpO1xuXHRcdGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmNsb3NlKCk7XG5cblx0XHR2YXIgZGVmYXVsdEVsZW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSlbMF07XG5cdFx0dmFyIGRlZmF1bHRDb21wdXRlZFN0eWxlID0gdGhpcy5nZXRDb21wdXRlZFN0eWxlKGRlZmF1bHRFbGVtZW50LCBpZnJhbWUuY29udGVudFdpbmRvdyk7XG5cdFx0dmFyIHZhbHVlO1xuXHRcdHZhciBwcm9wZXJ0eTtcblxuXHRcdGZvciAocHJvcGVydHkgaW4gZGVmYXVsdENvbXB1dGVkU3R5bGUpIHtcblx0XHRcdGlmIChkZWZhdWx0Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlID09PSB0cnVlKSB7XG5cdFx0XHRcdHZhbHVlID0gZGVmYXVsdENvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wZXJ0eSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWx1ZSA9IGRlZmF1bHRDb21wdXRlZFN0eWxlW3Byb3BlcnR5XTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHZhbHVlICE9PSBudWxsKSB7XG5cdFx0XHRcdHN3aXRjaCAocHJvcGVydHkpIHtcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0c3R5bGVzW3Byb3BlcnR5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnd2lkdGgnOlxuXHRcdFx0XHRcdGNhc2UgJ2hlaWdodCc6XG5cdFx0XHRcdFx0Y2FzZSAnbWluV2lkdGgnOlxuXHRcdFx0XHRcdGNhc2UgJ21pbkhlaWdodCc6XG5cdFx0XHRcdFx0Y2FzZSAnbWF4V2lkdGgnOlxuXHRcdFx0XHRcdGNhc2UgJ21heEhlaWdodCc6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG5cblx0XHRyZXR1cm4gc3R5bGVzO1xuXHR9O1xuXG5cdG9iamVjdEZpdC5nZXRNYXRjaGVkU3R5bGUgPSBmdW5jdGlvbihlbGVtZW50LCBwcm9wZXJ0eSl7XG5cdFx0Ly8gZWxlbWVudCBwcm9wZXJ0eSBoYXMgaGlnaGVzdCBwcmlvcml0eVxuXHRcdHZhciB2YWwgPSBudWxsO1xuXHRcdHZhciBpbmxpbmV2YWwgPSBudWxsO1xuXG5cdFx0aWYgKGVsZW1lbnQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSkge1xuXHRcdFx0aW5saW5ldmFsID0gZWxlbWVudC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KTtcblx0XHR9IGVsc2UgaWYgKGVsZW1lbnQuY3VycmVudFN0eWxlKSB7XG5cdFx0XHRpbmxpbmV2YWwgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wZXJ0eV07XG5cdFx0fVxuXG5cdFx0Ly8gZ2V0IG1hdGNoZWQgcnVsZXNcblx0XHR2YXIgcnVsZXMgPSB3aW5kb3cuZ2V0TWF0Y2hlZENTU1J1bGVzKGVsZW1lbnQpO1xuXHRcdHZhciBpID0gcnVsZXMubGVuZ3RoO1xuXHRcdHZhciByO1xuXHRcdHZhciBpbXBvcnRhbnQ7XG5cblx0XHRpZiAoaSkge1xuXHRcdFx0Ly8gaXRlcmF0ZSB0aGUgcnVsZXMgYmFja3dhcmRzXG5cdFx0XHQvLyBydWxlcyBhcmUgb3JkZXJlZCBieSBwcmlvcml0eSwgaGlnaGVzdCBsYXN0XG5cdFx0XHRmb3IgKDsgaSAtLT4gMDspIHtcblx0XHRcdFx0ciA9IHJ1bGVzW2ldO1xuXHRcdFx0XHRpbXBvcnRhbnQgPSByLnN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkocHJvcGVydHkpO1xuXG5cdFx0XHRcdC8vIGlmIHNldCwgb25seSByZXNldCBpZiBpbXBvcnRhbnRcblx0XHRcdFx0aWYgKHZhbCA9PT0gbnVsbCB8fCBpbXBvcnRhbnQpIHtcblx0XHRcdFx0XHR2YWwgPSByLnN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuXG5cdFx0XHRcdFx0Ly8gZG9uZSBpZiBpbXBvcnRhbnRcblx0XHRcdFx0XHRpZiAoaW1wb3J0YW50KSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBpZiBpdCdzIGltcG9ydGFudCwgd2UgYXJlIGRvbmVcblx0XHRpZiAoIXZhbCAmJiBpbmxpbmV2YWwgIT09IG51bGwpIHtcblx0XHRcdHZhbCA9IGlubGluZXZhbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsO1xuXHR9O1xuXG5cdC8vIERldGVjdHMgb3JpZW50YXRpb25cblx0b2JqZWN0Rml0Lm9yaWVudGF0aW9uID0gZnVuY3Rpb24ocmVwbGFjZWRFbGVtZW50KSB7XG5cdFx0aWYgKHJlcGxhY2VkRWxlbWVudC5wYXJlbnROb2RlICYmIHJlcGxhY2VkRWxlbWVudC5wYXJlbnROb2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd4LW9iamVjdC1maXQnKSB7XG5cdFx0XHR2YXIgd2lkdGggPSByZXBsYWNlZEVsZW1lbnQubmF0dXJhbFdpZHRoIHx8IHJlcGxhY2VkRWxlbWVudC5jbGllbnRXaWR0aDtcblx0XHRcdHZhciBoZWlnaHQgPSByZXBsYWNlZEVsZW1lbnQubmF0dXJhbEhlaWdodCB8fCByZXBsYWNlZEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXHRcdFx0dmFyIHBhcmVudFdpZHRoID0gcmVwbGFjZWRFbGVtZW50LnBhcmVudE5vZGUuY2xpZW50V2lkdGg7XG5cdFx0XHR2YXIgcGFyZW50SGVpZ2h0ID0gcmVwbGFjZWRFbGVtZW50LnBhcmVudE5vZGUuY2xpZW50SGVpZ2h0O1xuXG5cdFx0XHRpZiAoIWhlaWdodCB8fCB3aWR0aCAvIGhlaWdodCA+IHBhcmVudFdpZHRoIC8gcGFyZW50SGVpZ2h0KSB7XG5cdFx0XHRcdGlmIChyZXBsYWNlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXgtb2JqZWN0LXJlbGF0aW9uJykgIT09ICd3aWRlcicpIHtcblx0XHRcdFx0XHRyZXBsYWNlZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXgtb2JqZWN0LXJlbGF0aW9uJywnd2lkZXInKTtcblx0XHRcdFx0XHRyZXBsYWNlZEVsZW1lbnQuY2xhc3NOYW1lICs9ICcgeC1vYmplY3QtZml0LXdpZGVyJztcblxuXHRcdFx0XHRcdGlmICh0aGlzLl9kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3gtb2JqZWN0LWZpdC13aWRlcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHJlcGxhY2VkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEteC1vYmplY3QtcmVsYXRpb24nKSAhPT0gJ3RhbGxlcicpIHtcblx0XHRcdFx0XHRyZXBsYWNlZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXgtb2JqZWN0LXJlbGF0aW9uJywndGFsbGVyJyk7XG5cdFx0XHRcdFx0cmVwbGFjZWRFbGVtZW50LmNsYXNzTmFtZSArPSAnIHgtb2JqZWN0LWZpdC10YWxsZXInO1xuXG5cdFx0XHRcdFx0aWYgKHRoaXMuX2RlYnVnICYmIHdpbmRvdy5jb25zb2xlKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygneC1vYmplY3QtZml0LXRhbGxlcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRvYmplY3RGaXQucHJvY2VzcyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0XHRpZiAoIWFyZ3Muc2VsZWN0b3IgfHwgIWFyZ3MucmVwbGFjZWRFbGVtZW50cykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFNldCBvcHRpb24gb2JqZWN0Rml0LmRpc2FibGVDcm9zc0RvbWFpblxuXHRcdG9iamVjdEZpdC5kaXNhYmxlQ3Jvc3NEb21haW4gPSBhcmdzLmRpc2FibGVDcm9zc0RvbWFpbiB8fCAnZmFsc2UnO1xuXG5cdFx0Ly8gU2V0IG9wdGlvbiBmaXQtdHlwZVxuXHRcdGFyZ3MuZml0dHlwZSA9IGFyZ3MuZml0dHlwZSB8fCAnbm9uZSc7XG5cblx0XHRzd2l0Y2ggKGFyZ3MuZml0dHlwZSkge1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRjYXNlICdub25lJzpcblx0XHRcdGNhc2UgJ2ZpbGwnOlxuXHRcdFx0Y2FzZSAnY29udGFpbic6XG5cdFx0XHRjYXNlICdjb3Zlcic6XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBTZXQgb3B0aW9uIHJlcGxhY2VkRWxlbWVudHNcblx0XHR2YXIgcmVwbGFjZWRFbGVtZW50cyA9IGFyZ3MucmVwbGFjZWRFbGVtZW50cztcblxuXHRcdGlmKCFyZXBsYWNlZEVsZW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwLCByZXBsYWNlZEVsZW1lbnRzTGVuZ3RoID0gcmVwbGFjZWRFbGVtZW50cy5sZW5ndGg7IGkgPCByZXBsYWNlZEVsZW1lbnRzTGVuZ3RoOyBpKyspIHtcblx0XHRcdHRoaXMucHJvY2Vzc0VsZW1lbnQocmVwbGFjZWRFbGVtZW50c1tpXSwgYXJncyk7XG5cdFx0fVxuXHR9O1xuXG5cdG9iamVjdEZpdC5wcm9jZXNzRWxlbWVudCA9IGZ1bmN0aW9uKHJlcGxhY2VkRWxlbWVudCwgYXJncykge1xuXHRcdHZhciBwcm9wZXJ0eTtcblx0XHR2YXIgdmFsdWU7XG5cdFx0dmFyIHJlcGxhY2VkRWxlbWVudFN0eWxlcyA9IG9iamVjdEZpdC5nZXRDb21wdXRlZFN0eWxlKHJlcGxhY2VkRWxlbWVudCk7XG5cdFx0dmFyIHJlcGxhY2VkRWxlbWVudERlZmF1bHRTdHlsZXMgPSBvYmplY3RGaXQuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUocmVwbGFjZWRFbGVtZW50KTtcblx0XHR2YXIgd3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd4LW9iamVjdC1maXQnKTtcblxuXHRcdGlmIChvYmplY3RGaXQuX2RlYnVnICYmIHdpbmRvdy5jb25zb2xlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnQXBwbHlpbmcgdG8gV1JBUFBFUi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcblx0XHR9XG5cblx0XHRmb3IgKHByb3BlcnR5IGluIHJlcGxhY2VkRWxlbWVudFN0eWxlcykge1xuXHRcdFx0c3dpdGNoIChwcm9wZXJ0eSkge1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHZhbHVlID0gb2JqZWN0Rml0LmdldE1hdGNoZWRTdHlsZShyZXBsYWNlZEVsZW1lbnQsIHByb3BlcnR5KTtcblxuXHRcdFx0XHRcdGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gJycpIHtcblx0XHRcdFx0XHRcdGlmIChvYmplY3RGaXQuX2RlYnVnICYmIHdpbmRvdy5jb25zb2xlKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHByb3BlcnR5ICsgJzogJyArIHZhbHVlKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0d3JhcHBlckVsZW1lbnQuc3R5bGVbcHJvcGVydHldID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdsZW5ndGgnOlxuXHRcdFx0XHRjYXNlICdwYXJlbnRSdWxlJzpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKG9iamVjdEZpdC5fZGVidWcgJiYgd2luZG93LmNvbnNvbGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdBcHBseWluZyB0byBSRVBMQUNFRCBFTEVNRU5ULS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xuXHRcdH1cblx0XHRmb3IgKHByb3BlcnR5IGluIHJlcGxhY2VkRWxlbWVudERlZmF1bHRTdHlsZXMpIHtcblx0XHRcdHN3aXRjaCAocHJvcGVydHkpIHtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR2YWx1ZSA9IHJlcGxhY2VkRWxlbWVudERlZmF1bHRTdHlsZXNbcHJvcGVydHldO1xuXG5cdFx0XHRcdFx0aWYgKG9iamVjdEZpdC5fZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgdmFsdWUgIT09ICcnKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhwcm9wZXJ0eSArICc6ICcgKyB2YWx1ZSk7XG5cblx0XHRcdFx0XHRcdGlmIChyZXBsYWNlZEVsZW1lbnQuc3R5bGVbcHJvcGVydHldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ0luZGV4ZWQgc3R5bGUgcHJvcGVydGllcyAoYCcgKyBwcm9wZXJ0eSArICdgKSBub3Qgc3VwcG9ydGVkIGluOiAnICsgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChyZXBsYWNlZEVsZW1lbnQuc3R5bGVbcHJvcGVydHldKSB7XG5cdFx0XHRcdFx0XHRyZXBsYWNlZEVsZW1lbnQuc3R5bGVbcHJvcGVydHldID0gdmFsdWU7IC8vIHNob3VsZCB3b3JrIGluIEZpcmVmb3ggMzUrIGFuZCBhbGwgb3RoZXIgYnJvd3NlcnNcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVwbGFjZWRFbGVtZW50LnN0eWxlLnByb3BlcnR5ID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdsZW5ndGgnOlxuXHRcdFx0XHRjYXNlICdwYXJlbnRSdWxlJzpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0d3JhcHBlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3gtb2JqZWN0LWZpdC0nICsgYXJncy5maXR0eXBlKTtcblx0XHRyZXBsYWNlZEVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlckVsZW1lbnQsIHJlcGxhY2VkRWxlbWVudCk7XG5cdFx0d3JhcHBlckVsZW1lbnQuYXBwZW5kQ2hpbGQocmVwbGFjZWRFbGVtZW50KTtcblxuXHRcdG9iamVjdEZpdC5vcmllbnRhdGlvbihyZXBsYWNlZEVsZW1lbnQpO1xuXG5cdFx0dmFyIHJlc2l6ZVRpbWVyID0gbnVsbDtcblx0XHR2YXIgcmVzaXplQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHJlc2l6ZVRpbWVyICE9PSBudWxsKSB7XG5cdFx0XHRcdHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyZXNpemVUaW1lcik7XG5cdFx0XHR9XG5cdFx0XHRyZXNpemVUaW1lciA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtcblx0XHRcdFx0b2JqZWN0Rml0Lm9yaWVudGF0aW9uKHJlcGxhY2VkRWxlbWVudCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0c3dpdGNoIChhcmdzLmZpdHR5cGUpIHtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnY29udGFpbic6XG5cdFx0XHRjYXNlICdjb3Zlcic6XG5cdFx0XHRcdGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdFx0XHRcdHJlcGxhY2VkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzaXplQWN0aW9uLCBmYWxzZSk7XG5cdFx0XHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUFjdGlvbiwgZmFsc2UpO1xuXHRcdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHJlc2l6ZUFjdGlvbiwgZmFsc2UpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlcGxhY2VkRWxlbWVudC5hdHRhY2hFdmVudCgnb25sb2FkJywgcmVzaXplQWN0aW9uKTtcblx0XHRcdFx0XHR3aW5kb3cuYXR0YWNoRXZlbnQoJ29ucmVzaXplJywgcmVzaXplQWN0aW9uKTtcblx0XHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdG9iamVjdEZpdC5saXN0ZW4gPSBmdW5jdGlvbiAoYXJncykge1xuXHRcdHZhciBkb21JbnNlcnRlZEFjdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50KXtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdHZhciBhcmdzTGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cblx0XHRcdGZvciAoOyBpIDwgYXJnc0xlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICgoZWxlbWVudC5tb3pNYXRjaGVzU2VsZWN0b3IgJiYgZWxlbWVudC5tb3pNYXRjaGVzU2VsZWN0b3IoYXJnc1tpXS5zZWxlY3RvcikpIHx8XG5cdFx0XHRcdFx0KGVsZW1lbnQubXNNYXRjaGVzU2VsZWN0b3IgJiYgZWxlbWVudC5tc01hdGNoZXNTZWxlY3RvcihhcmdzW2ldLnNlbGVjdG9yKSkgfHxcblx0XHRcdFx0XHQoZWxlbWVudC5vTWF0Y2hlc1NlbGVjdG9yICYmIGVsZW1lbnQub01hdGNoZXNTZWxlY3RvcihhcmdzW2ldLnNlbGVjdG9yKSkgfHxcblx0XHRcdFx0XHQoZWxlbWVudC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgJiYgZWxlbWVudC53ZWJraXRNYXRjaGVzU2VsZWN0b3IoYXJnc1tpXS5zZWxlY3RvcikpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGFyZ3NbaV0ucmVwbGFjZWRFbGVtZW50cyA9IFtlbGVtZW50XTtcblx0XHRcdFx0XHRvYmplY3RGaXQucHJvY2VzcyhhcmdzW2ldKTtcblxuXHRcdFx0XHRcdGlmIChvYmplY3RGaXQuX2RlYnVnICYmIHdpbmRvdy5jb25zb2xlKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnTWF0Y2hpbmcgbm9kZSBpbnNlcnRlZDogJyArIGVsZW1lbnQubm9kZU5hbWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHR2YXIgZG9tSW5zZXJ0ZWRPYnNlcnZlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0XHRcdG9iamVjdEZpdC5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHRkb21JbnNlcnRlZEFjdGlvbihlbGVtZW50KTtcblx0XHRcdG9iamVjdEZpdC5vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHR2YXIgZG9tSW5zZXJ0ZWRFdmVudEZ1bmN0aW9uID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgZG9tSW5zZXJ0ZWRFdmVudEZ1bmN0aW9uLCBmYWxzZSk7XG5cdFx0XHRkb21JbnNlcnRlZEFjdGlvbihldmVudC50YXJnZXQpO1xuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIGRvbUluc2VydGVkRXZlbnRGdW5jdGlvbiwgZmFsc2UpO1xuXHRcdH07XG5cblx0XHR2YXIgZG9tUmVtb3ZlZEFjdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdFx0XHRpZiAoZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAneC1vYmplY3QtZml0Jykge1xuXHRcdFx0XHRlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG5cblx0XHRcdFx0aWYgKG9iamVjdEZpdC5fZGVidWcgJiYgd2luZG93LmNvbnNvbGUpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnTWF0Y2hpbmcgbm9kZSByZW1vdmVkOiAnICsgZWxlbWVudC5ub2RlTmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGRvbVJlbW92ZWRPYnNlcnZlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0XHRcdG9iamVjdEZpdC5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHRkb21SZW1vdmVkQWN0aW9uKGVsZW1lbnQpO1xuXHRcdFx0b2JqZWN0Rml0Lm9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHZhciBkb21SZW1vdmVkRXZlbnRGdW5jdGlvbiA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkJywgZG9tUmVtb3ZlZEV2ZW50RnVuY3Rpb24sIGZhbHNlKTtcblx0XHRcdGRvbVJlbW92ZWRBY3Rpb24oZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpO1xuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkJywgZG9tUmVtb3ZlZEV2ZW50RnVuY3Rpb24sIGZhbHNlKTtcblx0XHR9O1xuXG5cdFx0aWYgKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKSB7XG5cdFx0XHRpZiAob2JqZWN0Rml0Ll9kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnRE9NIE11dGF0aW9uT2JzZXJ2ZXInKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykge1xuXHRcdFx0XHRtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtdXRhdGlvbikge1xuXHRcdFx0XHRcdGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHR2YXIgbm9kZXMgPSBtdXRhdGlvbi5hZGRlZE5vZGVzO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIG5vZGVzTGVuZ3RoID0gbm9kZXMubGVuZ3RoOyBpIDwgbm9kZXNMZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRkb21JbnNlcnRlZE9ic2VydmVyRnVuY3Rpb24obm9kZXNbaV0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAobXV0YXRpb24ucmVtb3ZlZE5vZGVzICYmIG11dGF0aW9uLnJlbW92ZWROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGRvbVJlbW92ZWRPYnNlcnZlckZ1bmN0aW9uKG11dGF0aW9uLnRhcmdldCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLm9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdFx0aWYgKG9iamVjdEZpdC5fZGVidWcgJiYgd2luZG93LmNvbnNvbGUpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0RPTSBNdXRhdGlvbiBFdmVudHMnKTtcblx0XHRcdH1cblxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsIGRvbUluc2VydGVkRXZlbnRGdW5jdGlvbiwgZmFsc2UpO1xuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVSZW1vdmVkJywgZG9tUmVtb3ZlZEV2ZW50RnVuY3Rpb24sIGZhbHNlKTtcblx0XHR9XG5cdH07XG5cblx0b2JqZWN0Rml0LmluaXQgPSBmdW5jdGlvbiAoYXJncykge1xuXHRcdGlmICghYXJncykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghKGFyZ3MgaW5zdGFuY2VvZiBBcnJheSkpIHtcblx0XHRcdGFyZ3MgPSBbYXJnc107XG5cdFx0fVxuXG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciBhcmdzTGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cblx0XHRmb3IgKDsgaSA8IGFyZ3NMZW5ndGg7IGkrKykge1xuXHRcdFx0YXJnc1tpXS5yZXBsYWNlZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzW2ldLnNlbGVjdG9yKTtcblx0XHRcdHRoaXMucHJvY2VzcyhhcmdzW2ldKTtcblx0XHR9XG5cblx0XHR0aGlzLmxpc3RlbihhcmdzKTtcblx0fTtcblxuXHRvYmplY3RGaXQucG9seWZpbGwgPSBmdW5jdGlvbiAoYXJncykge1xuXHRcdGlmKCdvYmplY3RGaXQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSA9PT0gZmFsc2UpIHtcblx0XHRcdGlmIChvYmplY3RGaXQuX2RlYnVnICYmIHdpbmRvdy5jb25zb2xlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdvYmplY3QtZml0IG5vdCBuYXRpdmVseSBzdXBwb3J0ZWQnKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhlIGxpYnJhcnkgaXMgbG9hZGVkIGFmdGVyIGRvY3VtZW50IG9ubG9hZCBldmVudFxuXHRcdFx0aWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcblx0XHRcdFx0b2JqZWN0Rml0LmluaXQoYXJncyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBPdGhlcndpc2UgYXR0YWNoIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0XHRpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0XHRcdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRvYmplY3RGaXQuaW5pdChhcmdzKTtcblx0XHRcdFx0XHR9LCBmYWxzZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0d2luZG93LmF0dGFjaEV2ZW50KCdvbmxvYWQnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0b2JqZWN0Rml0LmluaXQoYXJncyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKG9iamVjdEZpdC5fZGVidWcgJiYgd2luZG93LmNvbnNvbGUpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ29iamVjdC1maXQgbmF0aXZlbHkgc3VwcG9ydGVkJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8qXG5cdCAqIEFNRCwgbW9kdWxlIGxvYWRlciwgZ2xvYmFsIHJlZ2lzdHJhdGlvblxuXHQgKi9cblxuXHQvLyBFeHBvc2UgbW9kYWwgZm9yIGxvYWRlcnMgdGhhdCBpbXBsZW1lbnQgdGhlIE5vZGUgbW9kdWxlIHBhdHRlcm4uXG5cdGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gb2JqZWN0Rml0O1xuXG5cdC8vIFJlZ2lzdGVyIGFzIGFuIEFNRCBtb2R1bGVcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9iamVjdEZpdDsgfSk7XG5cblx0Ly8gRXhwb3J0IGludG8gZ2xvYmFsIHNwYWNlXG5cdH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGdsb2JhbC5kb2N1bWVudCA9PT0gJ29iamVjdCcpIHtcblx0XHRnbG9iYWwub2JqZWN0Rml0ID0gb2JqZWN0Rml0O1xuXHR9XG5cbn0od2luZG93KSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vb2JqZWN0LWZpdC9kaXN0L3BvbHlmaWxsLm9iamVjdC1maXQuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XHJcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XHJcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHR9XHJcblx0cmV0dXJuIG1vZHVsZTtcclxufVxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sInNvdXJjZVJvb3QiOiIifQ=="}